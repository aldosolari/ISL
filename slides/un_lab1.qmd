---
title: "Lab 1"
subtitle: "Introduction to Statistical Learning - PISE"
author: "[Aldo Solari]{.orange}"
institute: "_Ca' Foscari University of Venice_"
page-layout: full
execute:
  cache: false
filters: 
  - remove-pause.lua
format:
  revealjs:
    auto-stretch: true
    center: true
    html-math-method: katex
    transition: none
    output-file: un_lab1_slides.html
    slide-number: true
    callout-appearance: minimal
    code-line-numbers: true
    theme: [default, ../template.css] # alternative themes (subset): default, night, dark
    embed-resources: false
    echo: false
    fig-dpi: 200
    # incremental: true  # Remove comment if you like incremental bullet points
    logo: img/cf_logo.png
    footer: "[ISL](https://aldosolari.github.io/ISL)"
    highlight-style: github
  html:
    html-math-method: katex
    echo: false
    callout-appearance: minimal
    theme: [simplex, ../template.css]
    toc: true
    toc-title: Table of contents
    embed-resources: false
    code-line-numbers: true
    smooth-scroll: true
    code-fold: false
    code-summary: "Show the code"
    fig-dpi: 150
    highlight-style: github
editor: 
  markdown: 
    wrap: 72
editor_options: 
  chunk_output_type: console
---


# Introduction to R


- In this lab we learn basic R commands by running them.
- The best way to learn R is to try the commands yourself.
- Download R: http://cran.r-project.org/
- Recommended IDE: RStudio (desktop or cloud version)
  - http://rstudio.com/

## Basic Commands

- `R` uses *functions* to perform operations  
- General syntax: `funcname(input1, input2, ...)`  
- Inputs are called *arguments*  
- A function can have any number of arguments  
- Example: `c()` (*concatenate*) creates a vector  
- Values inside `c()` are joined into one vector  
- Assign the result to an object (e.g., `x`)  
- Typing `x` prints the vector  

```{r}
#| label: chunk1
#| echo: true
x <- c(1, 3, 2, 5)
x
```

- `>` is just the R prompt (not part of the command)  
- It indicates that R is ready for input  
- You can also assign values using `=` instead of `<-`  

```{r}
#| label: chunk2
#| echo: true
x = c(1, 6, 2)
x
y = c(1, 4, 3)
```

- Use the *up* arrow to recall and edit previous commands  
- Type `?funcname` to open the help page for a function  

- R adds vectors *element-wise*  
- Vectors should have the same length  
- Check length using `length()`  

```{r}
#| label: chunk3
#| echo: true
length(x)
length(y)
x + y
```


- `ls()` lists all objects currently in memory  
- `rm()` removes objects you no longer need 

```{r}
#| label: chunk4
#| echo: true
ls()
rm(x, y)
ls()
```

- Remove all objects at once with `rm(list = ls())`  

```{r}
#| label: chunk5
#| echo: true
rm(list = ls())
```


- `matrix()` creates a matrix of numbers  
- Use `?matrix` to read the documentation  

```{r}
#| label: chunk6
#| echo: true
?matrix
```

- `matrix()` has several arguments  
- Main ones: `data`, `nrow`, `ncol`  
- Create a simple matrix using these three inputs  

```{r}
#| label: chunk7
#| echo: true
x <- matrix(data = c(1, 2, 3, 4), nrow = 2, ncol = 2)
x
```

- Argument names (`data=`, `nrow=`, `ncol=`) can be omitted  
- Order matters if names are not specified  

```{r}
#| label: chunk8
#| echo: true
x <- matrix(c(1, 2, 3, 4), 2, 2)
```

- Omitting argument names gives the same result (if order is correct)  
- Specifying names improves clarity and avoids mistakes  
- By default, `matrix()` fills entries *by column*  
- Use `byrow = TRUE` to fill entries *by row* 

```{r}
#| label: chunk9
#| echo: true
matrix(c(1, 2, 3, 4), 2, 2, byrow = TRUE)
```

- If not assigned, the matrix is printed but not saved  
- `sqrt()` applies element-wise to vectors or matrices  
- `x^2` raises each element of `x` to the power 2  
- Any power is allowed (including fractional or negative)  


```{r}
#| label: chunk10
#| echo: true
sqrt(x)
x^2
```


- `rnorm(n)` generates `n` random normal variables  
- Each call produces different values  
- Create two related vectors `x` and `y`  
- Use `cor()` to compute their correlation  


```{r}
#| label: chunk11
#| echo: true
x <- rnorm(50)
y <- x + rnorm(50, mean = 50, sd = .1)
cor(x, y)
```

- By default, `rnorm()` generates standard normal variables  
  - Mean = 0  
  - Standard deviation = 1  
- Modify using `mean` and `sd` arguments  
- Use `set.seed(integer)` for reproducibility  
- The seed ensures the same random numbers are generated 

```{r}
#| label: chunk12
#| echo: true
set.seed(1303)
rnorm(50)
```

- Use `set.seed()` to ensure reproducible results  
- Different R versions may produce small differences  

- `mean()` computes the sample mean  
- `var()` computes the variance  
- `sqrt(var(x))` gives the standard deviation  
- Alternatively, use `sd()` directly  

```{r}
#| label: chunk13
#| echo: true
set.seed(3)
y <- rnorm(100)
mean(y)
var(y)
sqrt(var(y))
sd(y)
```


## Graphics

- `plot()` is the main function for basic graphics in `R`  
- `plot(x, y)` creates a scatterplot  
- Additional arguments customize the plot  
  - Example: `xlab` sets the x-axis label  
- Use `?plot` to see all available options  

```{r}
#| label: chunk14
#| echo: true
x <- rnorm(100)
y <- rnorm(100)
plot(x, y)
plot(x, y, xlab = "this is the x-axis",
    ylab = "this is the y-axis",
    main = "Plot of X vs Y")
```

- Save plots by opening a graphics device  
- Use `pdf()` to create a PDF file  
- Use `jpeg()` to create a JPEG file  
- The function depends on the desired file format  

```{r}
#| label: chunk15
#| echo: true
pdf("Figure.pdf")
plot(x, y, col = "green")
dev.off()
```

- `dev.off()` closes the graphics device (finish saving the plot)  
- Alternatively, copy the plot window and paste into another document  

- `seq()` generates sequences of numbers  
- `seq(a, b)` creates integers from `a` to `b`  
- `seq(0, 1, length = 10)` creates 10 equally spaced values  
- `3:11` is shorthand for `seq(3, 11)`  

```{r}
#| label: chunk16
#| echo: true
x <- seq(1, 10)
x
x <- 1:10
x
x <- seq(-pi, pi, length = 50)
```


- `contour()` creates a *contour plot* (3D surface representation)  
- Similar to a topographical map  

- Required inputs:  
  - Vector of `x` values  
  - Vector of `y` values  
  - Matrix of `z` values (for each `(x, y)` pair)  

- Additional arguments allow customization  
- Use `?contour` for documentation  

```{r}
#| label: chunk17
#| echo: true
y <- x
f <- outer(x, y, function(x, y) cos(y) / (1 + x^2))
contour(x, y, f)
contour(x, y, f, nlevels = 45, add = T)
fa <- (f - t(f)) / 2
contour(x, y, fa, nlevels = 15)
```

- `image()` produces a color-coded plot (heatmap)  
- Colors represent the `z` values  
- Often used for temperature-style maps  

- `persp()` creates a 3D surface plot  
- `theta` and `phi` control the viewing angles  

```{r}
#| label: chunk18
#| echo: true
image(x, y, fa)
persp(x, y, fa)
persp(x, y, fa, theta = 30)
persp(x, y, fa, theta = 30, phi = 20)
persp(x, y, fa, theta = 30, phi = 70)
persp(x, y, fa, theta = 30, phi = 40)
```


## Indexing Data

- Often we need to examine part of a data set  
- Suppose the data are stored in a matrix `A`  

```{r}
#| label: chunk19
#| echo: true
A <- matrix(1:16, 4, 4)
A
```

- `A[2, 3]` selects the element in row 2, column 3  
- First index = row  
- Second index = column  


```{r}
#| label: chunk20
#| echo: true
A[2, 3]
```

- Use vectors or ranges to select multiple rows and/or columns  

```{r}
#| label: chunk21
#| echo: true
A[c(1, 3), c(2, 4)]
A[1:3, 2:4]
A[1:2, ]
A[, 1:2]
```

- Leaving one index empty selects all rows or all columns  
- `A[1:2, ]` → all columns  
- `A[, 1:2]` → all rows  
- A single row or column is treated as a vector  

```{r}
#| label: chunk22
#| echo: true
A[1, ]
```

- Use a negative index (`-`) to exclude rows or columns  
- `A[-1, ]` removes row 1  
- `A[, -1]` removes column 1  

```{r}
#| label: chunk23
#| echo: true
A[-c(1, 3), ]
A[-c(1, 3), -c(1, 3, 4)]
```

- `dim()` returns the dimensions of a matrix  
- Output format: (number of rows, number of columns)  

```{r}
#| label: chunk24
#| echo: true
dim(A)
```


## Loading Data

- First step in analysis: import the data  
- Use `read.table()` to load text files  
- Use `write.table()` to export data  
- Check the working directory before loading files  

- Load the `Auto` data set from `Auto.data`  
- Data are stored as a *data frame*  
- Use `View()` to inspect the data  
- Use `head()` to display the first rows  

```{r}
#| label: chunk25
#| echo: true
Auto <- read.table("../data/Auto.data")
View(Auto)
head(Auto)
```

- `Auto.data` is a plain text file  
- It can be opened with a text editor or Excel before importing  

- Data were loaded incorrectly because:  
  - R treated variable names as data  
  - Missing values are coded as `?`  

- Use `header = TRUE` to specify that the first row contains variable names  
- Use `na.strings = "?"` to define missing values  
- Missing values are common in real data sets  

```{r}
#| label: chunk26
#| echo: true
Auto <- read.table("../data/Auto.data", header = T, na.strings = "?", stringsAsFactors = T)
View(Auto)
```

- `stringsAsFactors = TRUE` converts character variables into *factors*  
- Each distinct string becomes a separate level  

- To import Excel data:  
  - Save as CSV (comma-separated values)  
  - Use `read.csv()` in R  

```{r}
#| label: chunk27
#| echo: true
Auto <- read.csv("../data/Auto.csv", na.strings = "?", stringsAsFactors = T)
View(Auto)
dim(Auto)
Auto[1:4, ]
```

- `dim()` returns the data dimensions  
  - 397 observations (rows)  
  - 9 variables (columns)  

- Several methods exist to handle missing data  
- Here, only 5 rows contain missing values  
- Use `na.omit()` to remove those rows  

```{r}
#| label: chunk28
#| echo: true
Auto <- na.omit(Auto)
dim(Auto)
```


- After loading the data correctly  
- Use `names()` to view the variable names  

```{r}
#| label: chunk29
#| echo: true
names(Auto)
```


## Additional Graphical and Numerical Summaries

- Use `plot()` to create *scatterplots* of quantitative variables  
- Typing variable names alone gives an error  
- R must be told which data set contains the variables  

```{r}
#| label: chunk30
#| echo: true
#| eval: false
plot(cylinders, mpg)
```

- Access variables using `dataset$variable`  
- Example: `Auto$mpg`  
- Alternatively, use `attach(Auto)` to access variables directly 

```{r}
#| label: chunk31
#| echo: true
plot(Auto$cylinders, Auto$mpg)
attach(Auto)
plot(cylinders, mpg)
```

- `cylinders` is stored as numeric → treated as quantitative  
- Since it has few distinct values, it can be treated as qualitative  
- Use `as.factor()` to convert numeric to categorical  

```{r}
#| label: chunk32
#| echo: true
cylinders <- as.factor(cylinders)
```

- If the x-axis variable is qualitative, `plot()` produces a *boxplot*  
- Boxplots summarize distributions by category  
- Additional arguments can customize the plot  

```{r}
#| label: chunk33
#| echo: true
plot(cylinders, mpg)
plot(cylinders, mpg, col = "red")
plot(cylinders, mpg, col = "red", varwidth = T)
plot(cylinders, mpg, col = "red", varwidth = T,
    horizontal = T)
plot(cylinders, mpg, col = "red", varwidth = T,
    xlab = "cylinders", ylab = "MPG")
```

- Use `hist()` to create a *histogram*  
- `col = 2` is equivalent to `col = "red"`  

```{r}
#| label: chunk34
#| echo: true
hist(mpg)
hist(mpg, col = 2)
hist(mpg, col = 2, breaks = 15)
```

- `pairs()` creates a *scatterplot matrix*  
- Shows scatterplots for all pairs of variables  
- Can specify a subset of variables  

```{r}
#| label: chunk35
#| echo: true
pairs(Auto)
pairs(
    ~ mpg + displacement + horsepower + weight + acceleration,
    data = Auto
  )
```


- `identify()` works with `plot()` for interactive labeling  
- Arguments: x-variable, y-variable, label variable  
- Click points on the plot to display labels  
- Press *Esc* to stop  
- Printed numbers correspond to row indices  

```{r}
#| label: chunk36
#| echo: true
plot(horsepower, mpg)
identify(horsepower, mpg, name)
```

- `summary()` provides a numerical summary of each variable  
- Output depends on the variable type (numeric or factor)  

```{r}
#| label: chunk37
#| echo: true
summary(Auto)
```

- For qualitative variables, `summary()` shows counts per category  
- You can also summarize a single variable (e.g., `summary(mpg)`) 

```{r}
#| label: chunk38
#| echo: true
summary(mpg)
```




- Use `q()` to quit R  
- Option to save the current *workspace* on exit  
- Save command history with `savehistory()`  
- Reload history with `loadhistory()`  

